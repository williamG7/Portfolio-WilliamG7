---
import KotlinIcon from "./icons/KotlinIcon.astro";
import AndroidIcon from "./icons/AndroidIcon.astro";
import ComposeIcon from "./icons/ComposeIcon.astro";
import SupabaseIcon from "./icons/SupabaseIcon.astro";
import AstroIcon from "./icons/AstroIcon.astro";
import TailwindIcon from "./icons/TailwindIcon.astro";
import TypeScriptIcon from "./icons/TypeScriptIcon.astro";
import ProjectIcon from "./icons/ProjectIcon.astro";

// Configuración de colores e iconos para cada tecnología
const TECH_CONFIG: Record<string, { color: string; icon: any }> = {
    "Kotlin": { 
        color: "bg-purple-500/20 text-purple-300 border-purple-500/30", 
        icon: KotlinIcon 
    },
    "Android": { 
        color: "bg-green-500/20 text-green-300 border-green-500/30", 
        icon: AndroidIcon 
    },
    "Jetpack Compose": { 
        color: "bg-blue-500/20 text-blue-300 border-blue-500/30", 
        icon: ComposeIcon 
    },
    "Google Maps API": { 
        color: "bg-red-500/20 text-red-300 border-red-500/30", 
        icon: null 
    },
    "Supabase": { 
        color: "bg-emerald-500/20 text-emerald-300 border-emerald-500/30", 
        icon: SupabaseIcon 
    },
    "Astro": { 
        color: "bg-orange-500/20 text-orange-300 border-orange-500/30", 
        icon: AstroIcon 
    },
    "Tailwind CSS": { 
        color: "bg-cyan-500/20 text-cyan-300 border-cyan-500/30", 
        icon: TailwindIcon 
    },
    "TypeScript": { 
        color: "bg-blue-600/20 text-blue-300 border-blue-600/30", 
        icon: TypeScriptIcon 
    },
};

const PROJECTS = [
    {
        title: "Portfolio Website",
        description: "Portfolio personal desarrollado con Astro y Tailwind CSS para mostrar mis proyectos y habilidades como desarrollador.",
        github: "https://github.com/williamG7/Portfolio-WilliamG7",
        image: "/projects/portfolio.png",
        tags: ["Astro", "Tailwind CSS", "TypeScript"],
        hasImage: true,
    },
    {
        title: "Proyecto 2",
        description: "Descripción breve del segundo proyecto y las tecnologías utilizadas en su desarrollo.",
        github: "https://github.com/williamG7",
        image: "https://via.placeholder.com/400x250/1a1a1a/ffffff?text=Proyecto+2",
        tags: ["Kotlin", "Android"],
        hasImage: true,
    },
    {
        title: "Maps Application",
        description: "Aplicación Android desarrollada en Kotlin que integra Google Maps API para crear y gestionar marcadores personalizados. Incluye autenticación, almacenamiento de imágenes y base de datos con Supabase.",
        github: "https://github.com/williamG7/mapsApplication",
        image: "",
        tags: ["Kotlin", "Android", "Jetpack Compose", "Google Maps API", "Supabase"],
        hasImage: false,
    },
    {
        title: "Proyecto 4",
        description: "Descripción breve del cuarto proyecto y las tecnologías utilizadas en su desarrollo.",
        github: "https://github.com/williamG7",
        image: "https://via.placeholder.com/400x250/1a1a1a/ffffff?text=Proyecto+4",
        tags: ["Kotlin", "Android"],
        hasImage: true,
    },
];
---

<div class="grid grid-cols-1 md:grid-cols-2 gap-5">
    {
        PROJECTS.map(({ title, description, github, tags, image, hasImage }) => (
            <article class="flex flex-col rounded-lg border border-white/10 bg-white/5 overflow-hidden hover:border-white/20 transition-all duration-300 hover:scale-105">
                {hasImage && (
                    <img
                        class="w-full h-44 object-cover"
                        src={image}
                        alt={`Captura de pantalla del proyecto ${title}`}
                    />
                )}
                <div class="p-5 flex flex-col">
                    <a
                        href={github}
                        target="_blank"
                        rel="noopener noreferrer"
                        class="text-lg md:text-xl font-semibold text-white hover:text-sky-400 hover:underline transition-colors mb-2 inline-flex items-center gap-2"
                    >
                        <ProjectIcon class="size-5 text-white shrink-0" />
                        {title}
                    </a>
                    <p class="text-gray-300 text-sm leading-relaxed mb-3">
                        {description}
                    </p>
                    <div class="flex flex-wrap gap-2 mt-auto">
                        {tags.map((tag) => {
                            const config = TECH_CONFIG[tag];
                            const Icon = config?.icon;
                            const colorClass = config?.color || "bg-sky-500/20 text-sky-300 border-sky-500/30";
                            
                            return (
                                <span class={`px-2.5 py-1 text-xs rounded-full border flex items-center gap-1.5 ${colorClass}`}>
                                    {Icon && <Icon class="size-3.5" />}
                                    {tag}
                                </span>
                            );
                        })}
                    </div>
                </div>
            </article>
        ))
    }
</div>
