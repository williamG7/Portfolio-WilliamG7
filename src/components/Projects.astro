---
import KotlinIcon from "./icons/KotlinIcon.astro";
import AndroidIcon from "./icons/AndroidIcon.astro";
import ComposeIcon from "./icons/ComposeIcon.astro";
import SupabaseIcon from "./icons/SupabaseIcon.astro";
import AstroIcon from "./icons/AstroIcon.astro";
import TailwindIcon from "./icons/TailwindIcon.astro";
import TypeScriptIcon from "./icons/TypeScriptIcon.astro";
import ProjectIcon from "./icons/ProjectIcon.astro";
import HtmlIcon from "./icons/HtmlIcon.astro";
import CssIcon from "./icons/CssIcon.astro";
import JavaScriptIcon from "./icons/JavaScriptIcon.astro";
import NodeIcon from "./icons/NodeIcon.astro";
import ExpressIcon from "./icons/ExpressIcon.astro";
import RetrofitIcon from "./icons/RetrofitIcon.astro";
import RoomIcon from "./icons/RoomIcon.astro";
import PythonIcon from "./icons/PythonIcon.astro";
import MicrosoftIcon from "./icons/MicrosoftIcon.astro";

// Configuración de colores e iconos para cada tecnología
const TECH_CONFIG: Record<string, { color: string; icon: any }> = {
    "Kotlin": { 
        color: "bg-purple-500/20 text-purple-300 border-purple-500/30", 
        icon: KotlinIcon 
    },
    "Android": { 
        color: "bg-green-500/20 text-green-300 border-green-500/30", 
        icon: AndroidIcon 
    },
    "Jetpack Compose": { 
        color: "bg-blue-500/20 text-blue-300 border-blue-500/30", 
        icon: ComposeIcon 
    },
    "Google Maps API": { 
        color: "bg-red-500/20 text-red-300 border-red-500/30", 
        icon: null 
    },
    "Supabase": { 
        color: "bg-emerald-500/20 text-emerald-300 border-emerald-500/30", 
        icon: SupabaseIcon 
    },
    "Astro": { 
        color: "bg-orange-500/20 text-orange-300 border-orange-500/30", 
        icon: AstroIcon 
    },
    "Tailwind CSS": { 
        color: "bg-cyan-500/20 text-cyan-300 border-cyan-500/30", 
        icon: TailwindIcon 
    },
    "TypeScript": { 
        color: "bg-blue-600/20 text-blue-300 border-blue-600/30", 
        icon: TypeScriptIcon 
    },
    "HTML": { 
        color: "bg-orange-600/20 text-orange-300 border-orange-600/30", 
        icon: HtmlIcon 
    },
    "CSS": { 
        color: "bg-blue-500/20 text-blue-300 border-blue-500/30", 
        icon: CssIcon 
    },
    "JavaScript": { 
        color: "bg-yellow-500/20 text-yellow-300 border-yellow-500/30", 
        icon: JavaScriptIcon 
    },
    "Node.js": { 
        color: "bg-green-600/20 text-green-300 border-green-600/30", 
        icon: NodeIcon 
    },
    "Express": { 
        color: "bg-gray-500/20 text-gray-300 border-gray-500/30", 
        icon: ExpressIcon 
    },
    "Retrofit": { 
        color: "bg-green-400/20 text-green-300 border-green-400/30", 
        icon: RetrofitIcon 
    },
    "Room": { 
        color: "bg-indigo-500/20 text-indigo-300 border-indigo-500/30", 
        icon: RoomIcon 
    },
    "Python": { 
        color: "bg-blue-400/20 text-blue-300 border-blue-400/30", 
        icon: PythonIcon 
    },
    "Microsoft MakeCode": { 
        color: "bg-gray-400/20 text-gray-300 border-gray-400/30", 
        icon: MicrosoftIcon 
    },
};

const PROJECTS = [
    {
        title: "Mokepon",
        description: "Juego multijugador inspirado en Pokémon con batallas en tiempo real. Permite que dos jugadores se conecten y enfrenten a sus criaturas en un mapa 2D interactivo con sistema de combate.",
        github: "https://github.com/williamG7/Mokepon",
        image: "/img/mokepon.png",
        tags: ["HTML", "CSS", "JavaScript", "Node.js", "Express"],
        hasImage: true,
    },
    {
        title: "API List",
        description: "App Android con la API de Rick and Morty. Incluye lista de personajes con vistas grid/lista, sistema de favoritos con Room, búsqueda en tiempo real, modo oscuro y navegación fluida con Jetpack Compose.",
        github: "https://github.com/williamG7/api-listW",
        image: "",
        tags: ["Kotlin", "Android", "Jetpack Compose", "Retrofit", "Room"],
        hasImage: false,
    },
    {
        title: "Maps Application",
        description: "Aplicación Android desarrollada en Kotlin que integra Google Maps API para crear y gestionar marcadores personalizados. Incluye autenticación, almacenamiento de imágenes y base de datos con Supabase.",
        github: "https://github.com/williamG7/mapsApplication",
        image: "",
        tags: ["Kotlin", "Android", "Jetpack Compose", "Google Maps API", "Supabase"],
        hasImage: false,
    },
    {
        title: "Conversor Rural",
        description: "Juego educativo desarrollado en MakeCode Arcade que enseña conversiones matemáticas de forma interactiva mediante el intercambio de productos rurales. Incluye sistema de menús intuitivos, validación automática de respuestas, efectos visuales y sonoros, tabla de equivalencias integrada y retroalimentación inmediata que guía al jugador.",
        github: "https://github.com/williamG7/conversorRural",
        image: "/img/conversorRural.webp",
        tags: ["Python", "TypeScript", "Microsoft MakeCode"],
        hasImage: true,
    },
];
---

<div class="columns-1 md:columns-2 gap-5">
    {
        PROJECTS.map(({ title, description, github, tags, image, hasImage }) => (
            <article class="flex flex-col rounded-lg border border-white/10 bg-white/5 overflow-hidden hover:border-white/20 transition-all duration-300 hover:scale-105 mb-5 break-inside-avoid">
                {hasImage && (
                    <div class="p-3 pb-0">
                        <img
                            class="w-full h-56 object-cover rounded-lg"
                            src={image}
                            alt={`Captura de pantalla del proyecto ${title}`}
                        />
                    </div>
                )}
                <div class="p-5 flex flex-col">
                    <a
                        href={github}
                        target="_blank"
                        rel="noopener noreferrer"
                        class="text-lg md:text-xl font-semibold text-white hover:text-sky-400 hover:underline transition-colors mb-2 inline-flex items-center gap-2"
                    >
                        <ProjectIcon class="size-5 text-white shrink-0" />
                        {title}
                    </a>
                    <p class="text-gray-300 text-sm leading-relaxed mb-3">
                        {description}
                    </p>
                    <div class="flex flex-wrap gap-2 mt-auto">
                        {tags.map((tag) => {
                            const config = TECH_CONFIG[tag];
                            const Icon = config?.icon;
                            const colorClass = config?.color || "bg-sky-500/20 text-sky-300 border-sky-500/30";
                            
                            return (
                                <span class={`px-2.5 py-1 text-xs rounded-full border flex items-center gap-1.5 ${colorClass}`}>
                                    {Icon && <Icon class="size-3.5" />}
                                    {tag}
                                </span>
                            );
                        })}
                    </div>
                </div>
            </article>
        ))
    }
</div>
